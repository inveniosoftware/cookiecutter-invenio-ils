"""
InvenioILS settings for {{ cookiecutter.project_name }} project.

This file was automatically generated by 'invenio-cli init'.
"""

from datetime import timedelta
from invenio_app.config import APP_DEFAULT_SECURE_HEADERS

def _(x):
    """Identity function used to trigger string extraction."""
    return x

CORS_SEND_WILDCARD = False
CORS_SUPPORTS_CREDENTIALS = True
DEBUG = True
###############################################################################
# I18N
###############################################################################
#: Default language
BABEL_DEFAULT_LANGUAGE = "en"
#: Default time zone
BABEL_DEFAULT_TIMEZONE = "Europe/Zurich"
#: Other supported languages (do not include the default language in list).
I18N_LANGUAGES = [
    # ('fr', _('French'))
]

###############################################################################
# Database
###############################################################################
SQLALCHEMY_DATABASE_URI="postgresql+psycopg2://{{cookiecutter.project_shortname}}:{{cookiecutter.project_shortname}}@localhost/{{cookiecutter.project_shortname}}"

###############################################################################
# Flask configuration
###############################################################################
#: Secret key - each installation (dev, production, ...) needs a separate key.
#: It should be changed before deploying.
SECRET_KEY = "CHANGE_ME"
TRUSTED_HOSTS = ["127.0.0.1"]

# if you need to render the Debugtoolbar, add 'unsafe-inline':
#   "script-src": ["'self'", "'unsafe-inline'"],
#   "style-src": ["'self'", "'unsafe-inline'"],
APP_DEFAULT_SECURE_HEADERS["content_security_policy"] = {
    "default-src": ["'self'"],
    "script-src": ["'self'"],
    "object-src": ["'self'"],
    "img-src": ["'self'"],
    "style-src": ["'self'", "'unsafe-inline'"],
    "font-src": [
        "'self'",
        "data:",
        "https://fonts.gstatic.com",
        "https://fonts.googleapis.com",
    ],
}

###############################################################################
# Flask-Security
###############################################################################
# Disable user registration
SECURITY_REGISTERABLE = False
SECURITY_RECOVERABLE = False
SECURITY_CONFIRMABLE = False
SECURITY_CHANGEABLE = False
PERMANENT_SESSION_LIFETIME = timedelta(1)

###############################################################################
# OAI-PMH
###############################################################################
OAISERVER_ID_PREFIX = "oai:{{ cookiecutter.project_shortname }}:"

###############################################################################
# MAILS
###############################################################################
SUPPORT_EMAIL = "support@{{ cookiecutter.project_site }}"
#: Librarians email for internal system notifications.
ILS_MAIL_NOTIFY_MANAGEMENT_RECIPIENTS = ["librarians@{{ cookiecutter.project_site }}"]
#: Disable email sending by default.
MAIL_SUPPRESS_SEND = True
#: Email address for email notification sender.
MAIL_NOTIFY_SENDER = "librarians@{{ cookiecutter.project_site }}"
#: Email address used as sender of account registration emails.
SECURITY_EMAIL_SENDER = SUPPORT_EMAIL
#: Email subject for account registration emails.
SECURITY_EMAIL_SUBJECT_REGISTER = _("Welcome to the {{ cookiecutter.project_name }}")

###############################################################################
# MAILS templates
###############################################################################
ILS_NOTIFICATIONS_TEMPLATES_CIRCULATION = {
    "bulk_extend": "{{ cookiecutter.project_shortname }}_bulk_extend.html",
    "cancel": "{{ cookiecutter.project_shortname }}_cancel.html",
    "request": "{{ cookiecutter.project_shortname }}_request.html",
    "request_no_items": "{{ cookiecutter.project_shortname }}_request_no_items.html",
    "checkin": "{{ cookiecutter.project_shortname }}_checkin.html",
    "checkout": "{{ cookiecutter.project_shortname }}_checkout.html",
    "extend": "{{ cookiecutter.project_shortname }}_extend.html",
    "overdue_reminder": "{{ cookiecutter.project_shortname }}_overdue_reminder.html",
    "expiring_reminder": "{{ cookiecutter.project_shortname }}_will_expire_in_reminder.html",
}

ILS_NOTIFICATIONS_TEMPLATES_DOCUMENT_REQUEST = {
    "request_accepted": "{{ cookiecutter.project_shortname }}_document_request_accept.html",
    "request_declined_user_cancel":
        "{{ cookiecutter.project_shortname }}_document_request_decline_user_cancel.html",
    "request_declined_in_catalog":
        "{{ cookiecutter.project_shortname }}_document_request_decline_in_catalog.html",
    "request_declined_not_found": "{{ cookiecutter.project_shortname }}_document_request_decline_not_found.html",
    "request_declined_other": "{{ cookiecutter.project_shortname }}_document_request_decline_other.html",
}

ILS_ILL_NOTIFICATIONS_TEMPLATES = {
    "extension_accepted": "{{ cookiecutter.project_shortname }}_patron_loan_extension_accept.html",
    "extension_declined": "{{ cookiecutter.project_shortname }}_patron_loan_extension_decline.html",
    "extension_requested": "{{ cookiecutter.project_shortname }}_patron_loan_extension_request.html",
}

ILS_NOTIFICATIONS_TEMPLATES = {"footer": "{{ cookiecutter.project_shortname }}_footer.html"}

###############################################################################
# Data model extensions
###############################################################################
ILS_RECORDS_METADATA_EXTENSIONS = {}

###############################################################################
# Vocabularies
###############################################################################
#ILS_VOCABULARIES = []
